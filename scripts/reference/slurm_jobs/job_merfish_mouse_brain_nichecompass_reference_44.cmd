#!/bin/bash
#SBATCH -J merfish_mouse_brain_nichecompass_reference_44
#SBATCH -o ../scripts/reference/slurm_jobs/logs/out_merfish_mouse_brain_nichecompass_reference_44.txt
#SBATCH -e ../scripts/reference/slurm_jobs/logs/err_merfish_mouse_brain_nichecompass_reference_44.txt
#SBATCH -t 48:00:00
#SBATCH -p gpu_p
#SBATCH -c 6
#SBATCH --gres=gpu:1
#SBATCH --qos=gpu_normal
#SBATCH --mem=156G
#SBATCH --nice=10000
source $HOME/.bashrc
conda activate nichecompass-reproducibility
cd /
cd /home/aih/sebastian.birk/workspace/projects/nichecompass-reproducibility/scripts/reference
python ../train_nichecompass_reference_model.py --dataset merfish_mouse_brain --reference_batches batch1 batch2 batch3 batch4 batch5 batch6 batch7 batch8 batch9 batch10 batch11 batch12 batch13 batch14 batch15 batch16 batch17 batch18 batch19 batch20 batch21 batch22 batch23 batch24 batch25 batch26 batch27 batch28 batch29 batch30 batch31 batch32 batch33 batch34 batch35 batch36 batch37 batch38 batch39 batch40 batch41 batch42 batch43 batch44 batch45 batch46 batch47 batch48 batch49 batch50 batch51 batch52 batch53 batch54 batch55 batch56 batch57 batch58 batch59 batch60 batch61 batch62 batch63 batch64 batch65 batch66 batch67 batch68 batch69 batch70 batch71 batch72 batch73 batch74 batch75 batch76 batch77 batch78 batch79 batch80 batch81 batch82 batch83 batch84 batch85 batch86 batch87 batch88 batch89 batch90 batch91 batch92 batch93 batch94 batch95 batch96 batch97 batch98 batch99 batch100 batch101 batch102 batch103 batch104 batch105 batch106 batch107 batch108 batch109 batch110 batch111 batch112 batch113 batch114 batch115 batch116 batch117 batch118 batch119 batch120 batch121 batch122 batch123 batch124 batch125 batch126 batch127 batch128 batch129 batch130 batch131 batch132 batch133 batch134 batch135 batch136 batch137 batch138 batch139 batch140 batch141 batch142 batch143 batch144 batch145 batch146 batch147 batch148 batch149 batch150 batch151 batch152 batch153 batch154 batch155 batch156 batch157 batch158 batch159 batch160 batch161 batch162 batch163 batch164 batch165 batch166 batch167 batch168 batch169 batch170 batch171 batch172 batch173 batch174 batch175 batch176 batch177 batch178 batch179 batch180 batch181 batch182 batch183 batch184 batch185 batch186 batch187 batch188 batch189 batch190 batch191 batch192 batch193 batch194 batch195 batch196 batch197 batch198 batch199 batch200 batch201 batch202 batch203 batch204 batch205 batch206 batch207 batch208 batch209 batch210 batch211 batch212 batch213 batch214 batch215 batch216 batch217 batch218 batch219 batch220 batch221 batch222 batch223 batch224 batch225 batch226 batch227 batch228 batch229 batch230 batch231 batch232 batch233 batch234 batch235 batch236 batch237 batch238 batch239 --n_neighbors 4 --no-filter_genes --nichenet_keep_target_genes_ratio 1.0 --nichenet_max_n_target_genes_per_gp 250 --include_mebocost_gps --species mouse --gp_filter_mode subset --combine_overlap_gps --overlap_thresh_source_genes 0.9 --overlap_thresh_target_genes 0.9 --overlap_thresh_genes 0.9 --counts_key counts --cat_covariates_keys donor_id batch --cat_covariates_no_edges True True --spatial_key spatial --adj_key spatial_connectivities --mapping_entity_key mapping_entity --gp_targets_mask_key nichecompass_gp_targets --gp_sources_mask_key nichecompass_gp_sources --gp_names_key nichecompass_gp_names --model_label reference --active_gp_names_key nichecompass_active_gp_names --latent_key nichecompass_latent --active_gp_thresh_ratio 0.01 --gene_expr_recon_dist nb --cat_covariates_embeds_injection gene_expr_decoder --cat_covariates_embeds_nums 4 24 --log_variational --node_label_method one-hop-norm --n_layers_encoder 1 --n_hidden_encoder None --conv_layer_encoder gatv2conv --n_epochs 4 --n_epochs_all_gps 1 --n_epochs_no_cat_covariates_contrastive 0 --lr 0.001 --lambda_edge_recon 5000000. --lambda_gene_expr_recon 3000. --lambda_cat_covariates_contrastive 0.0 --contrastive_logits_pos_ratio 0.0 --contrastive_logits_neg_ratio 0.0 --lambda_group_lasso 0. --lambda_l1_masked 0.0 --edge_batch_size 1024 --node_batch_size None --edge_val_ratio 0.01 --node_val_ratio 0.01 --n_sampled_neighbors 4 --no-mlflow_tracking --no-compute_knn_graph --timestamp_suffix _44
